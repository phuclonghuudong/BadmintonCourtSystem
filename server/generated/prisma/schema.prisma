generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model NguoiDung {
  MaNguoiDung String    @id
  Email       String?
  HoTen       String?
  SoDienThoai String?
  CCCD        String?
  DiaChi      String?
  GioiTinh    String?
  NgaySinh    DateTime?
  TrangThai   Boolean?

  TaiKhoan TaiKhoan?
}

model TaiKhoan {
  MaNhanVien  String   @id
  MaNhomQuyen String
  TenDangNhap String
  MatKhau     String
  TrangThai   Boolean?

  NguoiDung NguoiDung @relation(fields: [MaNhanVien], references: [MaNguoiDung])
  NhomQuyen NhomQuyen @relation(fields: [MaNhomQuyen], references: [MaNhomQuyen])
}

model NhomQuyen {
  MaNhomQuyen  String   @id
  TenNhomQuyen String
  TrangThai    Boolean?

  TaiKhoan     TaiKhoan[]
  ChiTietQuyen ChiTietQuyen[]
}

model DanhMucChucNang {
  MaChucNang  String   @id
  TenChucNang String
  TrangThai   Boolean?

  ChiTietQuyen ChiTietQuyen[]
}

model ChiTietQuyen {
  MaNhomQuyen String
  MaChucNang  String
  HanhDong    String
  TrangThai   Boolean?

  NhomQuyen       NhomQuyen       @relation(fields: [MaNhomQuyen], references: [MaNhomQuyen])
  DanhMucChucNang DanhMucChucNang @relation(fields: [MaChucNang], references: [MaChucNang])

  @@id([MaNhomQuyen, MaChucNang])
}

model LoaiSan {
  MaLoaiSan  String   @id
  TenLoaiSan String
  MoTa       String?
  TrangThai  Boolean?

  San San[]
}

model San {
  MaSan     String   @id
  MaLoaiSan String
  TenSan    String
  MoTa      String?
  TrangThai Boolean?

  LoaiSan LoaiSan   @relation(fields: [MaLoaiSan], references: [MaLoaiSan])
  GiaThue GiaThue[]
  DatSan  DatSan[]
}

model KhungGio {
  MaKhungGio String   @id
  GioBatDau  String
  GioKetThuc String
  MoTa       String?
  TrangThai  Boolean?

  GiaThue GiaThue[]
}

model GiaThue {
  MaGiaThue    String   @id
  MaSan        String
  MaKhungGio   String
  ThuTrongTuan String
  GiaTien      Float
  MoTa         String?
  TrangThai    Boolean?

  San      San      @relation(fields: [MaSan], references: [MaSan])
  KhungGio KhungGio @relation(fields: [MaKhungGio], references: [MaKhungGio])
}

model KhachHang {
  MaKhachHang String    @id
  Email       String?
  HoTen       String?
  SoDienThoai String?
  CCCD        String?
  DiaChi      String?
  GioiTinh    String?
  NgaySinh    DateTime?
  TrangThai   Boolean?

  DatSan DatSan[]
}

model DatSan {
  MaPhieuDatSan String    @id
  MaSan         String
  MaKhachHang   String
  NgayDat       DateTime
  Checkin       DateTime
  CheckOut      DateTime
  GiaSan        Float
  NgaySinh      DateTime?
  TrangThai     Boolean?

  San           San             @relation(fields: [MaSan], references: [MaSan])
  KhachHang     KhachHang       @relation(fields: [MaKhachHang], references: [MaKhachHang])
  ChiTietDatSan ChiTietDatSan[]
}

model LoaiSanPham {
  MaLoaiSanPham  String   @id
  TenLoaiSanPham String
  MoTa           String?
  TrangThai      Boolean?

  SanPham SanPham[]
}

model SanPham {
  MaSanPham     String   @id
  MaLoaiSanPham String
  TenSanPham    String
  DonViTinh     String?
  HinhAnh       String?
  TrangThai     Boolean?

  LoaiSanPham   LoaiSanPham     @relation(fields: [MaLoaiSanPham], references: [MaLoaiSanPham])
  ChiTietDatSan ChiTietDatSan[]
}

model ChiTietDatSan {
  MaCTDS        String   @id
  MaPhieuDatSan String
  MaSanPham     String
  GiaBan        Float
  SoLuong       Int
  MoTa          String?
  TrangThai     Boolean?

  DatSan  DatSan  @relation(fields: [MaPhieuDatSan], references: [MaPhieuDatSan])
  SanPham SanPham @relation(fields: [MaSanPham], references: [MaSanPham])
}
